{"ast":null,"code":"// const app = require('express')()\n// const server = require('http').createServer(app)\n// const io = require('socket.io')(server)\n\n// io.on('connection', socket => {\n//     socket.on('message', msg => {\n//         console.log(msg)\n//         console.log(\"receive from client: \", JSON.parse(msg))\n//         ws.send(\"send to client: echo \", JSON.parse(msg)) // python 으로 데이터 보낸다, python에서 data 변수에 들어감\n\n//         let data = JSON.parse(msg)\n//         let ur = data.user\n//         let hr = data.heartrate\n//         let rp = data.resp\n//         let tp = data.temp\n\n//         console.log(ur)\n//         console.log(hr)\n//         console.log(rp)\n//         console.log(tp)\n//     })\n// })\n// server.listen(8080)\n\n// // Require HTTP module (to start server) and Socket.IO\n// var http = require('http');\n// io = require('socket.io');\n\n// // Start the server at port 8080\n// let express = require('express')\n// const app = express()\n// const server = http.createServer(app)\n// // var server = http.createServer(function(req, res){ \n//     // Send HTML headers and message\n//     // res.writeHead(200,{ 'Content-Type': 'text/html' }); \n//     // res.end('<h1>Hello Socket Lover!</h1>');\n// // });\n// server.listen(8080);\n\n// // Create a Socket.IO instance, passing it our server\n// var socket = io(server);\n\n// // Add a connect listener\n// socket.on('connection', function(client){ \n//     // Success!  Now listen to messages to be received\n//     // client.on('message', msg => {\n//     //             console.log(\"receive from client: \", JSON.parse(msg))\n//     //             ws.send(\"send to client: echo \", JSON.parse(msg)) // python 으로 데이터 보낸다, python에서 data 변수에 들어감\n\n//     //             let data = JSON.parse(msg)\n//     //             let ur = data.user\n//     //             let hr = data.heartrate\n//     //             let rp = data.resp\n//     //             let tp = data.temp\n\n//     //             console.log(ur)\n//     //             console.log(hr)\n//     //             console.log(rp)\n//     //             console.log(tp)\n\n//     //             // module.exports = {\n//     //             //     ur, hr, rp, tp\n//     //             // };\n\n//     //         });\n//     client.on('message', msg => { \n//         console.log('Received message from client!',JSON.parse(msg));\n//         let data = JSON.parse(msg)\n//         let ur = data.user\n//         let hr = data.heartrate\n//         let rp = data.resp\n//         let tp = data.temp\n\n//         console.log(ur)\n//         console.log(hr)\n//         console.log(rp)\n//         console.log(tp)\n//     });\n//     // client.on('disconnect',function(){\n//     //     clearInterval(interval);\n//     //     console.log('Server has disconnected');\n//     // });\n\n// });\n\n// import SockJS from 'sockjs-client'\n// const Stomp = require('stompjs');\n// let stompClient;\n\n// const connect = (event) => {\n\n//     if(1) {//'ws://localhost:8080/ws'\n//       var socket = new SockJS('ws://localhost:8080');\n//       stompClient.current = Stomp.over(socket);\n//       stompClient.current.connect({}, () => {\n//         setTimeout(function() {\n//           onConnected()\n//         }, 500)\n//       })\n//     }\n\n// }\n// import React from \"react\";\n// import WebSocket, { WebSocketServer } from \"ws\";\n// const { Server } = require('http');\n\nconst WebSocket = require('ws');\nconst wss = new WebSocket.Server({\n  port: 8080\n});\n\n// import WebSocket, { WebSocketServer } from 'ws';\n\n// const wss = new WebSocketServer({port: 8080});\n\nlet data = '';\nwss.on('connection', ws => {\n  ws.on('message', msg => {\n    // console.log(\"receive from client: \", JSON.parse(msg))\n    // ws.send(\"send to client: echo \", JSON.parse(msg)) // python 으로 데이터 보낸다, python에서 data 변수에 들어감\n    console.log(\"receive from client: \", msg);\n    ws.send(\"send to client: echo \" + msg);\n    data = msg;\n    wss.clients.forEach(client => {\n      if (client.readyState === WebSocket.OPEN) {\n        client.send(data);\n      }\n    });\n    // let data = JSON.parse(msg)\n    // let ur = data.user\n    // let hr = data.heartrate\n    // let rp = data.resp\n    // let tp = data.temp\n\n    // console.log(ur)\n    // console.log(hr)\n    // console.log(rp)\n    // console.log(tp)\n\n    // module.exports = {\n    //     ur, hr, rp, tp\n    // };\n  });\n\n  ws.on('close', () => {\n    console.log('disconnected');\n  });\n});\n\n// module.exports={\n//     getData: () => data,\n// };\nconst getData = () => {\n  data;\n};\nexport default getData;\n\n// const React = require(\"react\");\n// class server extends React.Component {\n//   constructor(props) {\n//     super(props);\n//     this.state = {\n//       currentData: []\n//     };\n//     this.ws = new WebSocket(\"ws://localhost:3333/\");\n//   }\n\n//   render() {\n//     this.ws.onopen = () => {\n//       console.log('Opened Connection!')\n//     };\n\n//     this.ws.onmessage = (event) => {\n//       this.setState({ currentData: JSON.parse(event.data) });\n//     };\n\n//     this.ws.onclose = () => {\n//       console.log('Closed Connection!')\n//     };\n\n//     const columns = [\n//       { Header: 'Name', accessor: 'name' },\n//       { Header: 'Number', accessor: 'number' }\n//     ]\n//     console.log(this.state.currentData);\n//     return (\n//       server\n//     );\n//   }\n// }\n// module.exports = {\n//   server,\n// };","map":{"version":3,"names":["WebSocket","require","wss","Server","port","data","on","ws","msg","console","log","send","clients","forEach","client","readyState","OPEN","getData"],"sources":["C:/Users/user/Downloads/hpe-example-main/hpe-example-main/my-app/src/Components/detail/server.js"],"sourcesContent":["// const app = require('express')()\r\n// const server = require('http').createServer(app)\r\n// const io = require('socket.io')(server)\r\n\r\n// io.on('connection', socket => {\r\n//     socket.on('message', msg => {\r\n//         console.log(msg)\r\n//         console.log(\"receive from client: \", JSON.parse(msg))\r\n//         ws.send(\"send to client: echo \", JSON.parse(msg)) // python 으로 데이터 보낸다, python에서 data 변수에 들어감\r\n    \r\n//         let data = JSON.parse(msg)\r\n//         let ur = data.user\r\n//         let hr = data.heartrate\r\n//         let rp = data.resp\r\n//         let tp = data.temp\r\n    \r\n//         console.log(ur)\r\n//         console.log(hr)\r\n//         console.log(rp)\r\n//         console.log(tp)\r\n//     })\r\n// })\r\n// server.listen(8080)\r\n\r\n// // Require HTTP module (to start server) and Socket.IO\r\n// var http = require('http');\r\n// io = require('socket.io');\r\n\r\n// // Start the server at port 8080\r\n// let express = require('express')\r\n// const app = express()\r\n// const server = http.createServer(app)\r\n// // var server = http.createServer(function(req, res){ \r\n//     // Send HTML headers and message\r\n//     // res.writeHead(200,{ 'Content-Type': 'text/html' }); \r\n//     // res.end('<h1>Hello Socket Lover!</h1>');\r\n// // });\r\n// server.listen(8080);\r\n\r\n// // Create a Socket.IO instance, passing it our server\r\n// var socket = io(server);\r\n\r\n// // Add a connect listener\r\n// socket.on('connection', function(client){ \r\n//     // Success!  Now listen to messages to be received\r\n//     // client.on('message', msg => {\r\n//     //             console.log(\"receive from client: \", JSON.parse(msg))\r\n//     //             ws.send(\"send to client: echo \", JSON.parse(msg)) // python 으로 데이터 보낸다, python에서 data 변수에 들어감\r\n            \r\n//     //             let data = JSON.parse(msg)\r\n//     //             let ur = data.user\r\n//     //             let hr = data.heartrate\r\n//     //             let rp = data.resp\r\n//     //             let tp = data.temp\r\n            \r\n//     //             console.log(ur)\r\n//     //             console.log(hr)\r\n//     //             console.log(rp)\r\n//     //             console.log(tp)\r\n                \r\n//     //             // module.exports = {\r\n//     //             //     ur, hr, rp, tp\r\n//     //             // };\r\n            \r\n//     //         });\r\n//     client.on('message', msg => { \r\n//         console.log('Received message from client!',JSON.parse(msg));\r\n//         let data = JSON.parse(msg)\r\n//         let ur = data.user\r\n//         let hr = data.heartrate\r\n//         let rp = data.resp\r\n//         let tp = data.temp\r\n    \r\n//         console.log(ur)\r\n//         console.log(hr)\r\n//         console.log(rp)\r\n//         console.log(tp)\r\n//     });\r\n//     // client.on('disconnect',function(){\r\n//     //     clearInterval(interval);\r\n//     //     console.log('Server has disconnected');\r\n//     // });\r\n\r\n// });\r\n\r\n// import SockJS from 'sockjs-client'\r\n// const Stomp = require('stompjs');\r\n// let stompClient;\r\n\r\n// const connect = (event) => {\r\n  \r\n//     if(1) {//'ws://localhost:8080/ws'\r\n//       var socket = new SockJS('ws://localhost:8080');\r\n//       stompClient.current = Stomp.over(socket);\r\n//       stompClient.current.connect({}, () => {\r\n//         setTimeout(function() {\r\n//           onConnected()\r\n//         }, 500)\r\n//       })\r\n//     }\r\n  \r\n// }\r\n// import React from \"react\";\r\n// import WebSocket, { WebSocketServer } from \"ws\";\r\n// const { Server } = require('http');\r\n\r\nconst WebSocket = require('ws');\r\nconst wss = new WebSocket.Server({ port:8080 });\r\n\r\n// import WebSocket, { WebSocketServer } from 'ws';\r\n\r\n// const wss = new WebSocketServer({port: 8080});\r\n\r\nlet data = '';\r\n\r\nwss.on('connection', ws => {\r\n    ws.on('message', msg => {\r\n        // console.log(\"receive from client: \", JSON.parse(msg))\r\n        // ws.send(\"send to client: echo \", JSON.parse(msg)) // python 으로 데이터 보낸다, python에서 data 변수에 들어감\r\n        console.log(\"receive from client: \", msg)\r\n        ws.send(\"send to client: echo \" + msg)\r\n        \r\n        data = msg;\r\n        wss.clients.forEach((client) => {\r\n            if (client.readyState === WebSocket.OPEN) {\r\n                client.send(data);\r\n            }\r\n        })\r\n        // let data = JSON.parse(msg)\r\n        // let ur = data.user\r\n        // let hr = data.heartrate\r\n        // let rp = data.resp\r\n        // let tp = data.temp\r\n    \r\n        // console.log(ur)\r\n        // console.log(hr)\r\n        // console.log(rp)\r\n        // console.log(tp)\r\n        \r\n        // module.exports = {\r\n        //     ur, hr, rp, tp\r\n        // };\r\n    \r\n    });\r\n    ws.on('close', ()=> {\r\n        console.log('disconnected');\r\n    });\r\n\r\n});\r\n\r\n// module.exports={\r\n//     getData: () => data,\r\n// };\r\nconst getData = () => {\r\n    data;\r\n}\r\n\r\nexport default getData;\r\n\r\n\r\n\r\n\r\n// const React = require(\"react\");\r\n// class server extends React.Component {\r\n//   constructor(props) {\r\n//     super(props);\r\n//     this.state = {\r\n//       currentData: []\r\n//     };\r\n//     this.ws = new WebSocket(\"ws://localhost:3333/\");\r\n//   }\r\n\r\n//   render() {\r\n//     this.ws.onopen = () => {\r\n//       console.log('Opened Connection!')\r\n//     };\r\n\r\n//     this.ws.onmessage = (event) => {\r\n//       this.setState({ currentData: JSON.parse(event.data) });\r\n//     };\r\n\r\n//     this.ws.onclose = () => {\r\n//       console.log('Closed Connection!')\r\n//     };\r\n\r\n//     const columns = [\r\n//       { Header: 'Name', accessor: 'name' },\r\n//       { Header: 'Number', accessor: 'number' }\r\n//     ]\r\n//     console.log(this.state.currentData);\r\n//     return (\r\n//       server\r\n//     );\r\n//   }\r\n// }\r\n// module.exports = {\r\n//   server,\r\n// };"],"mappings":"AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,MAAMA,SAAS,GAAGC,OAAO,CAAC,IAAI,CAAC;AAC/B,MAAMC,GAAG,GAAG,IAAIF,SAAS,CAACG,MAAM,CAAC;EAAEC,IAAI,EAAC;AAAK,CAAC,CAAC;;AAE/C;;AAEA;;AAEA,IAAIC,IAAI,GAAG,EAAE;AAEbH,GAAG,CAACI,EAAE,CAAC,YAAY,EAAEC,EAAE,IAAI;EACvBA,EAAE,CAACD,EAAE,CAAC,SAAS,EAAEE,GAAG,IAAI;IACpB;IACA;IACAC,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEF,GAAG,CAAC;IACzCD,EAAE,CAACI,IAAI,CAAC,uBAAuB,GAAGH,GAAG,CAAC;IAEtCH,IAAI,GAAGG,GAAG;IACVN,GAAG,CAACU,OAAO,CAACC,OAAO,CAAEC,MAAM,IAAK;MAC5B,IAAIA,MAAM,CAACC,UAAU,KAAKf,SAAS,CAACgB,IAAI,EAAE;QACtCF,MAAM,CAACH,IAAI,CAACN,IAAI,CAAC;MACrB;IACJ,CAAC,CAAC;IACF;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;;IAEA;IACA;IACA;EAEJ,CAAC,CAAC;;EACFE,EAAE,CAACD,EAAE,CAAC,OAAO,EAAE,MAAK;IAChBG,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;EAC/B,CAAC,CAAC;AAEN,CAAC,CAAC;;AAEF;AACA;AACA;AACA,MAAMO,OAAO,GAAG,MAAM;EAClBZ,IAAI;AACR,CAAC;AAED,eAAeY,OAAO;;AAKtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}